<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>责任链模式 | 谁动了我的芝麻酱</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/dracula.css"><link rel="canonical" href="https://blog.cuihp.top/2016/04/02-责任链模式.html"/>
<meta name="description" content="责任链模式简介： 责任链模式（Chain of Responsibility Pattern）是一种设计模式，对于责任链模式可以理解为进行一次“击鼓传花”的游戏，每个玩家都有一位下家，这个玩家只要知道自己的下家，自己不符合条件就传递给下家。 …">
<meta name="keywords" content="design patterns">
<meta property="og:type" content="article">
<meta property="og:title" content="责任链模式">
<meta property="og:url" content="https://blog.cuihp.top/2016/04/02-责任链模式.html">
<meta property="og:site_name" content="谁动了我的芝麻酱">
<meta property="og:description" content="责任链模式简介： 责任链模式（Chain of Responsibility Pattern）是一种设计模式，对于责任链模式可以理解为进行一次“击鼓传花”的游戏，每个玩家都有一位下家，这个玩家只要知道自己的下家，自己不符合条件就传递给下家。 …">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://bucketcuihp.oss-cn-hongkong.aliyuncs.com/3b1e698b1b9dfdeeedaef1a926e76e0c.jpg">
<meta property="og:updated_time" content="2018-05-06T06:42:13.699Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="责任链模式">
<meta name="twitter:description" content="责任链模式简介： 责任链模式（Chain of Responsibility Pattern）是一种设计模式，对于责任链模式可以理解为进行一次“击鼓传花”的游戏，每个玩家都有一位下家，这个玩家只要知道自己的下家，自己不符合条件就传递给下家。 …">
<meta name="twitter:image" content="https://bucketcuihp.oss-cn-hongkong.aliyuncs.com/3b1e698b1b9dfdeeedaef1a926e76e0c.jpg"><meta property="article:author" content="CuiHp"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2016-04-02 19:47:40"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="CuiHp"><link rel="icon" href="/images/icon.png"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="谁动了我的芝麻酱"><meta name="naver-site-verification" content="{&quot;github&quot;:&quot;https://github.com/cuihp&quot;}"></head><body itemscope itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/icon.png" alt="谁动了我的芝麻酱"><span class="menu__item__link--brand__label">谁动了我的芝麻酱</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Home</a></div><div class="menu__item"><a class="menu__item__link" href="/android">Android</a></div><div class="menu__item"><a class="menu__item__link" href="https://github.com/cuihp">Github</a></div><div class="menu__item"><a class="menu__item__link" href="/about">About</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">责任链模式</h1><div class="article__meta"><time class="article__meta__time" datetime="2016-04-02T11:47:40.000Z" itemprop="datePublished">2016-04-02 19:47:40</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/design-patterns/">design patterns</a></div></div><div class="article__contents"><img src="https://bucketcuihp.oss-cn-hongkong.aliyuncs.com/3b1e698b1b9dfdeeedaef1a926e76e0c.jpg"/><h3 id="责任链模式简介："><a href="#责任链模式简介：" class="headerlink" title="责任链模式简介："></a>责任链模式简介：</h3><p> 责任链模式（Chain of Responsibility Pattern）是一种设计模式，对于责任链模式可以理解为进行一次“击鼓传花”的游戏，每个玩家都有一位下家，这个玩家只要知道自己的下家，自己不符合条件就传递给下家。</p>
<p> 将所有执行者围成一条直链，或者一条环链，或者一个树结构，每一位执行者不需要知道自己的上家，只需要知道自己的下家，这样一个请求过来，请求在链上传递，直到最终有一个执行者处理这个请求。发送请求的客户端不知道哪一位执行者最终处理这个请求，这可以使请求的发送者和请求的处理者解耦。</p>
<h3 id="代码结构："><a href="#代码结构：" class="headerlink" title="代码结构："></a>代码结构：</h3><p>需要有一个作为规定规范的抽象的执行者：这通常使用抽象类，规定了每一位参与游戏的玩家需要有一个下家、以及“执行请求”的抽象方法，让玩家自己去实现具体内容，并为他们提供”如果自己不处理请求时使下家执行的方法。</p>
<p>同时需要有具体执行者的角色：这些具体的执行者继承了抽象执行者，同时规定这些具体执行者必须知道自己的下家（使用构造函数实现），他们需要实现自己执行请求的方法：如果自己无法处理或不满足要求将请求转给下家去做。     </p>
<h4 id="抽象执行者（Player）："><a href="#抽象执行者（Player）：" class="headerlink" title="抽象执行者（Player）："></a>抽象执行者（Player）：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//抽象执行者：玩家</span><br><span class="line">public abstract class Player&#123;</span><br><span class="line">	／／自己的下家</span><br><span class="line">	private Player nextPlayer;</span><br><span class="line"></span><br><span class="line">	abstract public void doing(int i);</span><br><span class="line"></span><br><span class="line">    //为子类提供set 方法</span><br><span class="line">    public void setNextPlayer（Player nextPlayer）&#123;</span><br><span class="line">    	this.nextPlayer = nextPlayer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //将请求传给下家处理</span><br><span class="line">    public void next(int i)&#123;</span><br><span class="line">    	if(nextPlayer !=null)&#123;</span><br><span class="line">    		nextPlayer.doing(i);</span><br><span class="line">    	&#125;else&#123;</span><br><span class="line">    		//没有下一位时候进行的操作</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="具体执行者："><a href="#具体执行者：" class="headerlink" title="具体执行者："></a>具体执行者：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">public class XiaoZHang extends Player&#123;</span><br><span class="line">  //每一位玩家知道自己的下家</span><br><span class="line">  public XiaoZHang(Player nextPlayer)&#123;</span><br><span class="line">     this.setNextPlayer = nextPlayer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void doing(int i)&#123;</span><br><span class="line">     if(i==1)&#123;</span><br><span class="line">     	//做相应的事情</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">     	// 交给下个人处理</span><br><span class="line">     	next(i);</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class XiaoWang extends Player&#123;</span><br><span class="line">  //每一位玩家知道自己的下家</span><br><span class="line">  public XiaoZHang(Player nextPlayer)&#123;</span><br><span class="line">     this.setNextPlayer = nextPlayer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void doing(int i)&#123;</span><br><span class="line">     if(i==2)&#123;</span><br><span class="line">     	//做相应的事情</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">     	// 交给下个人处理</span><br><span class="line">     	next(i);</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class XiaoLi extends Player&#123;</span><br><span class="line">  //每一位玩家知道自己的下家</span><br><span class="line">  public XiaoZHang(Player nextPlayer)&#123;</span><br><span class="line">     this.setNextPlayer = nextPlayer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void doing(int i)&#123;</span><br><span class="line">     if(i==3)&#123;</span><br><span class="line">     	//做相应的事情</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">     	// 交给下个人处理</span><br><span class="line">     	next(i);</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 客户端不必关系具体哪一执行者去执行，只需要去做自己想做的事情就好啦</span><br><span class="line"> Player player=new XiaoZhang(new XiaoWang(new XiaoLi(null)));</span><br><span class="line"> palyer.doing(2);</span><br></pre></td></tr></table></figure>
<h3 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h3><ul>
<li>很多的对象由每一个对象对其下家的引用而连接起来的一条链。</li>
<li>请求在这个链上传递，知道链上的某一个对象决定处理此请求。</li>
<li>发出这个请求的客户端并不知道链上的哪一个对象最终处理这个请求。</li>
<li>责任链可能是一条直线、一个环链甚至一个树结构的一部分。</li>
</ul>
</div><div class="article__tags"><a class="article__tags__item" href="/tags/design-patterns/">design patterns</a></div><div class="article__author" itemscope itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="https://dn-coding-net-production-static.qbox.me/static/3c014d76335271b74510d8857e2f7892.png" alt="CuiHp"><a class="article__author__link" href="https://blog.cuihp.top" title="About CuiHp" rel="author">CuiHp</a><p class="article__author__desc">一选择，一条路，一岔口</p><div class="article__author__socials"><a class="article__author__socials__item" href="https://github.com/cuihp" title="github" target="_blank"><i class="fa fa-github"></i></a><a class="article__author__socials__item" href="/atom.xml" title="rss" target="_blank"><i class="fa fa-rss"></i></a></div><meta itemprop="name" content="CuiHp"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-github"><i class="fa fa-github"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() {
  var d = document, s = d.createElement('script');
  s.src = '//http-cuihp-top.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2018-05-06T06:42:13.699Z"><meta itemprop="articleBody" content="责任链模式简介： 责任链模式（Chain of Responsibility Pattern）是一种设计模式，对于责任链模式可以理解为进行一次“击鼓传花”的游戏，每个玩家都有一位下家，这个玩家只要知道自己的下家，自己不符合条件就传递给下家。
..."><meta itemprop="url" content="https://blog.cuihp.top/2016/04/02-责任链模式.html"><meta itemprop="mainEntityOfPage" content="https://blog.cuihp.top/2016/04/02-责任链模式.html"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="谁动了我的芝麻酱"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://blog.cuihp.top/images/icon.png"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://blog.cuihp.tophttps://bucketcuihp.oss-cn-hongkong.aliyuncs.com/3b1e698b1b9dfdeeedaef1a926e76e0c.jpg"><meta itemprop="url" content="https://blog.cuihp.tophttps://bucketcuihp.oss-cn-hongkong.aliyuncs.com/3b1e698b1b9dfdeeedaef1a926e76e0c.jpg"><meta itemprop="width" content="1280"><meta itemprop="height" content="720"></div></article></div></div></div><footer id="footer"><p class="copyright"><small>© 2018 CuiHp<br>Powered by <a href="https://blog.cuihp.top" rel="external">谁动了我的芝麻酱</a></small></p></footer><!--[if lt IE 10]><script src="/js/classList.min.js"></script><![endif]--><script src="/js/index.min.js"></script></body></html>